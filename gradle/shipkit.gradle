tasks.named("generateChangelog") {
	previousRevision = project.ext.'shipkit-auto-version.previous-tag'
	readOnlyToken = System.getenv("GITHUB_TOKEN") || "bf61e48ac43dbad4d4a63ff664f5f9446adaa9c5"
	repository = minimallyCorrectDefaults.organisation + "/" + minimallyCorrectDefaults.repository
}

tasks.named("githubRelease") {
	def genTask = tasks.named("generateChangelog").get()
	dependsOn genTask
	repository = genTask.repository
	changelog = genTask.outputFile
	writeToken = System.getenv("GITHUB_TOKEN")
}

bintray.dryRun = !(project.hasProperty("bintrayNoDryRun") || System.getenv("CI"))
bintray.publications = ["pluginMaven", project.name + "PluginMarkerMaven"]
